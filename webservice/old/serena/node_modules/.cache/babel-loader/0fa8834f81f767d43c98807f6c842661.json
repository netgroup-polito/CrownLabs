{"ast":null,"code":"'use strict';\n\nclass CancelError extends Error {\n  constructor() {\n    super('Promise was canceled');\n    this.name = 'CancelError';\n  }\n\n  get isCanceled() {\n    return true;\n  }\n\n}\n\nclass PCancelable {\n  static fn(userFn) {\n    return function () {\n      const args = [].slice.apply(arguments);\n      return new PCancelable((resolve, reject, onCancel) => {\n        args.push(onCancel);\n        userFn.apply(null, args).then(resolve, reject);\n      });\n    };\n  }\n\n  constructor(executor) {\n    this._cancelHandlers = [];\n    this._isPending = true;\n    this._isCanceled = false;\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      return executor(value => {\n        this._isPending = false;\n        resolve(value);\n      }, error => {\n        this._isPending = false;\n        reject(error);\n      }, handler => {\n        this._cancelHandlers.push(handler);\n      });\n    });\n  }\n\n  then(onFulfilled, onRejected) {\n    return this._promise.then(onFulfilled, onRejected);\n  }\n\n  catch(onRejected) {\n    return this._promise.catch(onRejected);\n  }\n\n  finally(onFinally) {\n    return this._promise.finally(onFinally);\n  }\n\n  cancel() {\n    if (!this._isPending || this._isCanceled) {\n      return;\n    }\n\n    if (this._cancelHandlers.length > 0) {\n      try {\n        for (const handler of this._cancelHandlers) {\n          handler();\n        }\n      } catch (err) {\n        this._reject(err);\n      }\n    }\n\n    this._isCanceled = true;\n\n    this._reject(new CancelError());\n  }\n\n  get isCanceled() {\n    return this._isCanceled;\n  }\n\n}\n\nObject.setPrototypeOf(PCancelable.prototype, Promise.prototype);\nmodule.exports = PCancelable;\nmodule.exports.CancelError = CancelError;","map":{"version":3,"sources":["/home/s41m0n/Documents/University/Turin/YearII/CrownLabs/frontend/node_modules/p-cancelable/index.js"],"names":["CancelError","Error","constructor","name","isCanceled","PCancelable","fn","userFn","args","slice","apply","arguments","resolve","reject","onCancel","push","then","executor","_cancelHandlers","_isPending","_isCanceled","_promise","Promise","_reject","value","error","handler","onFulfilled","onRejected","catch","finally","onFinally","cancel","length","err","Object","setPrototypeOf","prototype","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,WAAN,SAA0BC,KAA1B,CAAgC;AAC/BC,EAAAA,WAAW,GAAG;AACb,UAAM,sBAAN;AACA,SAAKC,IAAL,GAAY,aAAZ;AACA;;AAED,MAAIC,UAAJ,GAAiB;AAChB,WAAO,IAAP;AACA;;AAR8B;;AAWhC,MAAMC,WAAN,CAAkB;AACjB,SAAOC,EAAP,CAAUC,MAAV,EAAkB;AACjB,WAAO,YAAY;AAClB,YAAMC,IAAI,GAAG,GAAGC,KAAH,CAASC,KAAT,CAAeC,SAAf,CAAb;AACA,aAAO,IAAIN,WAAJ,CAAgB,CAACO,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,KAA+B;AACrDN,QAAAA,IAAI,CAACO,IAAL,CAAUD,QAAV;AACAP,QAAAA,MAAM,CAACG,KAAP,CAAa,IAAb,EAAmBF,IAAnB,EAAyBQ,IAAzB,CAA8BJ,OAA9B,EAAuCC,MAAvC;AACA,OAHM,CAAP;AAIA,KAND;AAOA;;AAEDX,EAAAA,WAAW,CAACe,QAAD,EAAW;AACrB,SAAKC,eAAL,GAAuB,EAAvB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAKC,WAAL,GAAmB,KAAnB;AAEA,SAAKC,QAAL,GAAgB,IAAIC,OAAJ,CAAY,CAACV,OAAD,EAAUC,MAAV,KAAqB;AAChD,WAAKU,OAAL,GAAeV,MAAf;AAEA,aAAOI,QAAQ,CACdO,KAAK,IAAI;AACR,aAAKL,UAAL,GAAkB,KAAlB;AACAP,QAAAA,OAAO,CAACY,KAAD,CAAP;AACA,OAJa,EAKdC,KAAK,IAAI;AACR,aAAKN,UAAL,GAAkB,KAAlB;AACAN,QAAAA,MAAM,CAACY,KAAD,CAAN;AACA,OARa,EASdC,OAAO,IAAI;AACV,aAAKR,eAAL,CAAqBH,IAArB,CAA0BW,OAA1B;AACA,OAXa,CAAf;AAaA,KAhBe,CAAhB;AAiBA;;AAEDV,EAAAA,IAAI,CAACW,WAAD,EAAcC,UAAd,EAA0B;AAC7B,WAAO,KAAKP,QAAL,CAAcL,IAAd,CAAmBW,WAAnB,EAAgCC,UAAhC,CAAP;AACA;;AAEDC,EAAAA,KAAK,CAACD,UAAD,EAAa;AACjB,WAAO,KAAKP,QAAL,CAAcQ,KAAd,CAAoBD,UAApB,CAAP;AACA;;AAEDE,EAAAA,OAAO,CAACC,SAAD,EAAY;AAClB,WAAO,KAAKV,QAAL,CAAcS,OAAd,CAAsBC,SAAtB,CAAP;AACA;;AAEDC,EAAAA,MAAM,GAAG;AACR,QAAI,CAAC,KAAKb,UAAN,IAAoB,KAAKC,WAA7B,EAA0C;AACzC;AACA;;AAED,QAAI,KAAKF,eAAL,CAAqBe,MAArB,GAA8B,CAAlC,EAAqC;AACpC,UAAI;AACH,aAAK,MAAMP,OAAX,IAAsB,KAAKR,eAA3B,EAA4C;AAC3CQ,UAAAA,OAAO;AACP;AACD,OAJD,CAIE,OAAOQ,GAAP,EAAY;AACb,aAAKX,OAAL,CAAaW,GAAb;AACA;AACD;;AAED,SAAKd,WAAL,GAAmB,IAAnB;;AACA,SAAKG,OAAL,CAAa,IAAIvB,WAAJ,EAAb;AACA;;AAED,MAAII,UAAJ,GAAiB;AAChB,WAAO,KAAKgB,WAAZ;AACA;;AApEgB;;AAuElBe,MAAM,CAACC,cAAP,CAAsB/B,WAAW,CAACgC,SAAlC,EAA6Cf,OAAO,CAACe,SAArD;AAEAC,MAAM,CAACC,OAAP,GAAiBlC,WAAjB;AACAiC,MAAM,CAACC,OAAP,CAAevC,WAAf,GAA6BA,WAA7B","sourcesContent":["'use strict';\n\nclass CancelError extends Error {\n\tconstructor() {\n\t\tsuper('Promise was canceled');\n\t\tthis.name = 'CancelError';\n\t}\n\n\tget isCanceled() {\n\t\treturn true;\n\t}\n}\n\nclass PCancelable {\n\tstatic fn(userFn) {\n\t\treturn function () {\n\t\t\tconst args = [].slice.apply(arguments);\n\t\t\treturn new PCancelable((resolve, reject, onCancel) => {\n\t\t\t\targs.push(onCancel);\n\t\t\t\tuserFn.apply(null, args).then(resolve, reject);\n\t\t\t});\n\t\t};\n\t}\n\n\tconstructor(executor) {\n\t\tthis._cancelHandlers = [];\n\t\tthis._isPending = true;\n\t\tthis._isCanceled = false;\n\n\t\tthis._promise = new Promise((resolve, reject) => {\n\t\t\tthis._reject = reject;\n\n\t\t\treturn executor(\n\t\t\t\tvalue => {\n\t\t\t\t\tthis._isPending = false;\n\t\t\t\t\tresolve(value);\n\t\t\t\t},\n\t\t\t\terror => {\n\t\t\t\t\tthis._isPending = false;\n\t\t\t\t\treject(error);\n\t\t\t\t},\n\t\t\t\thandler => {\n\t\t\t\t\tthis._cancelHandlers.push(handler);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tthen(onFulfilled, onRejected) {\n\t\treturn this._promise.then(onFulfilled, onRejected);\n\t}\n\n\tcatch(onRejected) {\n\t\treturn this._promise.catch(onRejected);\n\t}\n\n\tfinally(onFinally) {\n\t\treturn this._promise.finally(onFinally);\n\t}\n\n\tcancel() {\n\t\tif (!this._isPending || this._isCanceled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._cancelHandlers.length > 0) {\n\t\t\ttry {\n\t\t\t\tfor (const handler of this._cancelHandlers) {\n\t\t\t\t\thandler();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tthis._reject(err);\n\t\t\t}\n\t\t}\n\n\t\tthis._isCanceled = true;\n\t\tthis._reject(new CancelError());\n\t}\n\n\tget isCanceled() {\n\t\treturn this._isCanceled;\n\t}\n}\n\nObject.setPrototypeOf(PCancelable.prototype, Promise.prototype);\n\nmodule.exports = PCancelable;\nmodule.exports.CancelError = CancelError;\n"]},"metadata":{},"sourceType":"script"}