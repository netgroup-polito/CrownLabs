{"ast":null,"code":"var once = require('once');\n\nvar noop = function () {};\n\nvar isRequest = function (stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n};\n\nvar isChildProcess = function (stream) {\n  return stream.stdio && Array.isArray(stream.stdio) && stream.stdio.length === 3;\n};\n\nvar eos = function (stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var ws = stream._writableState;\n  var rs = stream._readableState;\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n  var cancelled = false;\n\n  var onlegacyfinish = function () {\n    if (!stream.writable) onfinish();\n  };\n\n  var onfinish = function () {\n    writable = false;\n    if (!readable) callback.call(stream);\n  };\n\n  var onend = function () {\n    readable = false;\n    if (!writable) callback.call(stream);\n  };\n\n  var onexit = function (exitCode) {\n    callback.call(stream, exitCode ? new Error('exited with error code: ' + exitCode) : null);\n  };\n\n  var onerror = function (err) {\n    callback.call(stream, err);\n  };\n\n  var onclose = function () {\n    process.nextTick(onclosenexttick);\n  };\n\n  var onclosenexttick = function () {\n    if (cancelled) return;\n    if (readable && !(rs && rs.ended && !rs.destroyed)) return callback.call(stream, new Error('premature close'));\n    if (writable && !(ws && ws.ended && !ws.destroyed)) return callback.call(stream, new Error('premature close'));\n  };\n\n  var onrequest = function () {\n    stream.req.on('finish', onfinish);\n  };\n\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !ws) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n\n  if (isChildProcess(stream)) stream.on('exit', onexit);\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    cancelled = true;\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('exit', onexit);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n};\n\nmodule.exports = eos;","map":{"version":3,"sources":["/home/s41m0n/Documents/University/Turin/YearII/CrownLabs/frontend/node_modules/end-of-stream/index.js"],"names":["once","require","noop","isRequest","stream","setHeader","abort","isChildProcess","stdio","Array","isArray","length","eos","opts","callback","ws","_writableState","rs","_readableState","readable","writable","cancelled","onlegacyfinish","onfinish","call","onend","onexit","exitCode","Error","onerror","err","onclose","process","nextTick","onclosenexttick","ended","destroyed","onrequest","req","on","error","removeListener","module","exports"],"mappings":"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","sourcesContent":["var once = require('once');\n\nvar noop = function() {};\n\nvar isRequest = function(stream) {\n\treturn stream.setHeader && typeof stream.abort === 'function';\n};\n\nvar isChildProcess = function(stream) {\n\treturn stream.stdio && Array.isArray(stream.stdio) && stream.stdio.length === 3\n};\n\nvar eos = function(stream, opts, callback) {\n\tif (typeof opts === 'function') return eos(stream, null, opts);\n\tif (!opts) opts = {};\n\n\tcallback = once(callback || noop);\n\n\tvar ws = stream._writableState;\n\tvar rs = stream._readableState;\n\tvar readable = opts.readable || (opts.readable !== false && stream.readable);\n\tvar writable = opts.writable || (opts.writable !== false && stream.writable);\n\tvar cancelled = false;\n\n\tvar onlegacyfinish = function() {\n\t\tif (!stream.writable) onfinish();\n\t};\n\n\tvar onfinish = function() {\n\t\twritable = false;\n\t\tif (!readable) callback.call(stream);\n\t};\n\n\tvar onend = function() {\n\t\treadable = false;\n\t\tif (!writable) callback.call(stream);\n\t};\n\n\tvar onexit = function(exitCode) {\n\t\tcallback.call(stream, exitCode ? new Error('exited with error code: ' + exitCode) : null);\n\t};\n\n\tvar onerror = function(err) {\n\t\tcallback.call(stream, err);\n\t};\n\n\tvar onclose = function() {\n\t\tprocess.nextTick(onclosenexttick);\n\t};\n\n\tvar onclosenexttick = function() {\n\t\tif (cancelled) return;\n\t\tif (readable && !(rs && (rs.ended && !rs.destroyed))) return callback.call(stream, new Error('premature close'));\n\t\tif (writable && !(ws && (ws.ended && !ws.destroyed))) return callback.call(stream, new Error('premature close'));\n\t};\n\n\tvar onrequest = function() {\n\t\tstream.req.on('finish', onfinish);\n\t};\n\n\tif (isRequest(stream)) {\n\t\tstream.on('complete', onfinish);\n\t\tstream.on('abort', onclose);\n\t\tif (stream.req) onrequest();\n\t\telse stream.on('request', onrequest);\n\t} else if (writable && !ws) { // legacy streams\n\t\tstream.on('end', onlegacyfinish);\n\t\tstream.on('close', onlegacyfinish);\n\t}\n\n\tif (isChildProcess(stream)) stream.on('exit', onexit);\n\n\tstream.on('end', onend);\n\tstream.on('finish', onfinish);\n\tif (opts.error !== false) stream.on('error', onerror);\n\tstream.on('close', onclose);\n\n\treturn function() {\n\t\tcancelled = true;\n\t\tstream.removeListener('complete', onfinish);\n\t\tstream.removeListener('abort', onclose);\n\t\tstream.removeListener('request', onrequest);\n\t\tif (stream.req) stream.req.removeListener('finish', onfinish);\n\t\tstream.removeListener('end', onlegacyfinish);\n\t\tstream.removeListener('close', onlegacyfinish);\n\t\tstream.removeListener('finish', onfinish);\n\t\tstream.removeListener('exit', onexit);\n\t\tstream.removeListener('end', onend);\n\t\tstream.removeListener('error', onerror);\n\t\tstream.removeListener('close', onclose);\n\t};\n};\n\nmodule.exports = eos;\n"]},"metadata":{},"sourceType":"script"}