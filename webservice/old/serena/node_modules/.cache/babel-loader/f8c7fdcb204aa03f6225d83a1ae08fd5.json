{"ast":null,"code":"var common = require('./common');\n\nvar fs = require('fs'); // add c spaces to the left of str\n\n\nfunction lpad(c, str) {\n  var res = '' + str;\n\n  if (res.length < c) {\n    res = Array(c - res.length + 1).join(' ') + res;\n  }\n\n  return res;\n}\n\ncommon.register('uniq', _uniq, {\n  canReceivePipe: true,\n  cmdOptions: {\n    'i': 'ignoreCase',\n    'c': 'count',\n    'd': 'duplicates'\n  }\n}); //@\n//@ ### uniq([options,] [input, [output]])\n//@\n//@ Available options:\n//@\n//@ + `-i`: Ignore case while comparing\n//@ + `-c`: Prefix lines by the number of occurrences\n//@ + `-d`: Only print duplicate lines, one for each group of identical lines\n//@\n//@ Examples:\n//@\n//@ ```javascript\n//@ uniq('foo.txt');\n//@ uniq('-i', 'foo.txt');\n//@ uniq('-cd', 'foo.txt', 'bar.txt');\n//@ ```\n//@\n//@ Filter adjacent matching lines from `input`.\n\nfunction _uniq(options, input, output) {\n  // Check if this is coming from a pipe\n  var pipe = common.readFromPipe();\n\n  if (!pipe) {\n    if (!input) common.error('no input given');\n\n    if (!fs.existsSync(input)) {\n      common.error(input + ': No such file or directory');\n    } else if (common.statFollowLinks(input).isDirectory()) {\n      common.error(\"error reading '\" + input + \"'\");\n    }\n  }\n\n  if (output && fs.existsSync(output) && common.statFollowLinks(output).isDirectory()) {\n    common.error(output + ': Is a directory');\n  }\n\n  var lines = (input ? fs.readFileSync(input, 'utf8') : pipe).trimRight().split('\\n');\n\n  var compare = function (a, b) {\n    return options.ignoreCase ? a.toLocaleLowerCase().localeCompare(b.toLocaleLowerCase()) : a.localeCompare(b);\n  };\n\n  var uniqed = lines.reduceRight(function (res, e) {\n    // Perform uniq -c on the input\n    if (res.length === 0) {\n      return [{\n        count: 1,\n        ln: e\n      }];\n    } else if (compare(res[0].ln, e) === 0) {\n      return [{\n        count: res[0].count + 1,\n        ln: e\n      }].concat(res.slice(1));\n    } else {\n      return [{\n        count: 1,\n        ln: e\n      }].concat(res);\n    }\n  }, []).filter(function (obj) {\n    // Do we want only duplicated objects?\n    return options.duplicates ? obj.count > 1 : true;\n  }).map(function (obj) {\n    // Are we tracking the counts of each line?\n    return (options.count ? lpad(7, obj.count) + ' ' : '') + obj.ln;\n  }).join('\\n') + '\\n';\n\n  if (output) {\n    new common.ShellString(uniqed).to(output); // if uniq writes to output, nothing is passed to the next command in the pipeline (if any)\n\n    return '';\n  } else {\n    return uniqed;\n  }\n}\n\nmodule.exports = _uniq;","map":{"version":3,"sources":["/home/s41m0n/Documents/University/Turin/YearII/CrownLabs/frontend/node_modules/shelljs/src/uniq.js"],"names":["common","require","fs","lpad","c","str","res","length","Array","join","register","_uniq","canReceivePipe","cmdOptions","options","input","output","pipe","readFromPipe","error","existsSync","statFollowLinks","isDirectory","lines","readFileSync","trimRight","split","compare","a","b","ignoreCase","toLocaleLowerCase","localeCompare","uniqed","reduceRight","e","count","ln","concat","slice","filter","obj","duplicates","map","ShellString","to","module","exports"],"mappings":"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","sourcesContent":["var common = require('./common');\nvar fs = require('fs');\n\n// add c spaces to the left of str\nfunction lpad(c, str) {\n  var res = '' + str;\n  if (res.length < c) {\n    res = Array((c - res.length) + 1).join(' ') + res;\n  }\n  return res;\n}\n\ncommon.register('uniq', _uniq, {\n  canReceivePipe: true,\n  cmdOptions: {\n    'i': 'ignoreCase',\n    'c': 'count',\n    'd': 'duplicates',\n  },\n});\n\n//@\n//@ ### uniq([options,] [input, [output]])\n//@\n//@ Available options:\n//@\n//@ + `-i`: Ignore case while comparing\n//@ + `-c`: Prefix lines by the number of occurrences\n//@ + `-d`: Only print duplicate lines, one for each group of identical lines\n//@\n//@ Examples:\n//@\n//@ ```javascript\n//@ uniq('foo.txt');\n//@ uniq('-i', 'foo.txt');\n//@ uniq('-cd', 'foo.txt', 'bar.txt');\n//@ ```\n//@\n//@ Filter adjacent matching lines from `input`.\nfunction _uniq(options, input, output) {\n  // Check if this is coming from a pipe\n  var pipe = common.readFromPipe();\n\n  if (!pipe) {\n    if (!input) common.error('no input given');\n\n    if (!fs.existsSync(input)) {\n      common.error(input + ': No such file or directory');\n    } else if (common.statFollowLinks(input).isDirectory()) {\n      common.error(\"error reading '\" + input + \"'\");\n    }\n  }\n  if (output && fs.existsSync(output) && common.statFollowLinks(output).isDirectory()) {\n    common.error(output + ': Is a directory');\n  }\n\n  var lines = (input ? fs.readFileSync(input, 'utf8') : pipe).\n              trimRight().\n              split('\\n');\n\n  var compare = function (a, b) {\n    return options.ignoreCase ?\n           a.toLocaleLowerCase().localeCompare(b.toLocaleLowerCase()) :\n           a.localeCompare(b);\n  };\n  var uniqed = lines.reduceRight(function (res, e) {\n    // Perform uniq -c on the input\n    if (res.length === 0) {\n      return [{ count: 1, ln: e }];\n    } else if (compare(res[0].ln, e) === 0) {\n      return [{ count: res[0].count + 1, ln: e }].concat(res.slice(1));\n    } else {\n      return [{ count: 1, ln: e }].concat(res);\n    }\n  }, []).filter(function (obj) {\n                 // Do we want only duplicated objects?\n    return options.duplicates ? obj.count > 1 : true;\n  }).map(function (obj) {\n                 // Are we tracking the counts of each line?\n    return (options.count ? (lpad(7, obj.count) + ' ') : '') + obj.ln;\n  }).join('\\n') + '\\n';\n\n  if (output) {\n    (new common.ShellString(uniqed)).to(output);\n    // if uniq writes to output, nothing is passed to the next command in the pipeline (if any)\n    return '';\n  } else {\n    return uniqed;\n  }\n}\n\nmodule.exports = _uniq;\n"]},"metadata":{},"sourceType":"script"}