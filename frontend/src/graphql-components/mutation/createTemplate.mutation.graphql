mutation createTemplate(
  $workspaceId: String!
  $workspaceNamespace: String!
  $templateName: String!
  $environmentList: [EnvironmentListListItemInput!]!
  $templateId: String = "template-"
  $deleteAfter: String
  $descriptionTemplate: String!
  $inactivityTimeout: String
  $allowPublicExposure: Boolean
  $nodeSelector: JSON
) {
  createdTemplate: createCrownlabsPolitoItV1alpha2NamespacedTemplate(
    namespace: $workspaceNamespace
    itPolitoCrownlabsV1alpha2TemplateInput: {
      kind: "Template"
      apiVersion: "crownlabs.polito.it/v1alpha2"
      spec: {
        prettyName: $templateName
        description: $descriptionTemplate
        deleteAfter: $deleteAfter
        inactivityTimeout: $inactivityTimeout
        environmentList: $environmentList
        allowPublicExposure: $allowPublicExposure
        nodeSelector: $nodeSelector
        workspaceCrownlabsPolitoItWorkspaceRef: { name: $workspaceId }
      }
      metadata: { generateName: $templateId, namespace: $workspaceNamespace }
    }
  ) {
    spec {
      prettyName
      description
      deleteAfter
      inactivityTimeout
      allowPublicExposure
      nodeSelector
      environmentList {
        name
        guiEnabled
        persistent
        resources {
          cpu
          disk
          memory
          reservedCPUPercentage
        }
      }
    }
    metadata {
      name
      namespace
    }
  }
}
