(function(){"use strict";var e={542:function(e,t,s){var r=s(5471),i=function(){var e=this,t=e._self._c;return t("v-app",{style:{background:e.$vuetify.theme.themes[e.theme].background},attrs:{id:"app"}},[t("v-main",{attrs:{id:"main"}},[t("router-view")],1)],1)},a=[],n=s(5530);const o=(0,n.nY)("settings-store",{state:()=>({straightLinks:!1,darkTheme:!1,selectedFileType:"YAML",selectedInterval:"1m",maxLogLines:"1000"}),persist:!0});var l={name:"App",computed:{theme(){return this.$vuetify.theme.dark?"dark":"light"}},setup(){const e=o();return{store:e}},mounted(){this.$vuetify.theme.dark=this.store.darkTheme}},c=l,d=s(1656),u=s(9963),h=s.n(u),v=s(5668),p=s(5322),m=(0,d.A)(c,i,a,!1,null,null,null),g=m.exports;h()(m,{VApp:v.A,VMain:p.A});var f=s(173),y=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"overview"}},[t("AppBar",{attrs:{title:"Management Cluster",scale:Math.round(100*e.scale)+"%"},on:{togglePathStyle:e.linkHandler,reload:function(t){return e.fetchOverview(e.forceRedraw=!0)},zoomIn:()=>{e.$refs.overviewTree.$refs.tree.zoomIn()},zoomOut:()=>{e.$refs.overviewTree.$refs.tree.zoomOut()},showSettings:()=>{e.showSettingsOverlay=!0}}}),t("ManagementClusterTree",{ref:"overviewTree",attrs:{treeConfig:e.treeConfig,treeData:e.treeData,treeIsReady:e.treeIsReady},on:{scale:t=>{e.scale=t}}}),t("v-overlay",{attrs:{absolute:"",value:e.showSettingsOverlay,"z-index":"99999"}},[t("SettingsCard",{staticClass:"settingsCard",attrs:{version:e.gitVersion},on:{close:()=>{e.showSettingsOverlay=!e.showSettingsOverlay}}})],1),t("AlertMessage",{attrs:{type:"error",message:e.errorMessage},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}})],1)},k=[],C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"treeContainer"},[e.treeIsReady?t("vue-tree",{ref:"tree",attrs:{id:"overviewTree",dataset:e.treeData,config:e.treeConfig,"collapse-enabled":!1,linkStyle:e.store.straightLinks?"straight":"curve"},on:{scale:t=>e.$emit("scale",t)},scopedSlots:e._u([{key:"node",fn:function({node:s}){return[t("v-hover",{scopedSlots:e._u([{key:"default",fn:function({hover:r}){return[t(s.isManagement?"span":"router-link",{tag:"router-link",staticClass:"node-router-link",attrs:{to:"/cluster?name="+s.name+"&namespace="+s.namespace,event:s.isManagement?"":"click"}},[t("v-card",{staticClass:"node mx-auto transition-swing",style:e.$vuetify.theme.dark?{"background-color":r?"#383838":"#272727"}:null,attrs:{elevation:r?6:3}},[t("v-card-title",[t("span",{staticClass:"cardTitle text-truncate"},[e._v(" "+e._s(s.name)+" ")]),t("v-spacer"),t("v-icon",{attrs:{color:"primary"}},[e._v(" mdi-"+e._s(e.getIcon(s.infrastructureProvider))+" ")])],1),t("v-card-subtitle",{staticClass:"pb-1 text-truncate"},[e._v(e._s(""==s.namespace?"default":s.namespace))]),s.isManagement?e._e():t("ClusterPhase",{attrs:{phase:s.phase}}),t("v-card-actions",{class:["cardActions",s.isManagement?"pt-8":"pt-2"]},[t("v-card-text",{staticClass:"card-bottom-text"},[e._v(e._s(s.isManagement?"Management Cluster":"View Workload Cluster"))]),s.isManagement?e._e():t("span",[t("v-spacer"),t("v-icon",[e._v("mdi-arrow-top-right")])],1)],1)],1)],1)]}}],null,!0)})]}}],null,!1,3787049142)}):t("div",{staticClass:"spinner",attrs:{id:"overviewTree"}},[t("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1)},b=[],w=function(){var e=this,t=e._self._c;return t("div",{ref:"container",staticClass:"tree-container"},[t("svg",{ref:"svg",staticClass:"svg vue-tree",style:e.initialTransformStyle}),t("div",{ref:"domContainer",staticClass:"dom-container",style:e.initialTransformStyle},[t("transition-group",{attrs:{name:"tree-node-item",tag:"div"}},e._l(e.nodeDataList,function(s,r){return t("div",{key:s.data._key,staticClass:"node-slot",style:{left:e.formatDimension(e.direction===e.DIRECTION.VERTICAL?s.x:s.y),top:e.formatDimension(e.direction===e.DIRECTION.VERTICAL?s.y:s.x),width:e.formatDimension(e.config.nodeWidth),height:e.formatDimension(e.config.nodeHeight)}},[e._t("node",function(){return[t("span",[e._v(e._s(s.data.value))])]},{node:s.data,collapsed:s.data._collapsed,index:r,collapseNode:e.collapseNode})],2)}),0)],1)])},_=[],S=(s(4114),s(8111),s(2489),s(116),s(1701),s(4516));const A=/translate\((-?\d+)px, ?(-?\d+)px\)/i,x=/scale\((\S*)\)/i,I={CURVE:"curve",STRAIGHT:"straight"},T={VERTICAL:"vertical",HORIZONTAL:"horizontal"},$=100,O=100,V=200,L=100,z=800,R=.1;function M({x:e,y:t}){return{x:t,y:e}}var D={name:"vue-tree",props:{config:{type:Object,default:()=>({nodeWidth:$,nodeHeight:O,levelHeight:V})},linkStyle:{type:String,default:I.CURVE},direction:{type:String,default:T.VERTICAL},collapseEnabled:{type:Boolean,default:!0},dataset:{type:[Object,Array],required:!0}},data(){return{d3:S,colors:"568FE1",nodeDataList:[],linkDataList:[],initTransformX:0,initTransformY:0,DIRECTION:T,currentScale:1}},computed:{initialTransformStyle(){return{transform:`scale(1) translate(${this.initTransformX}px, ${this.initTransformY}px)`,transformOrigin:"center"}},_dataset(){return this.updatedInternalData(this.dataset)},_linkStyle(){return this.linkStyle}},mounted(){this.init()},methods:{uuid(){const e=[],t="0123456789abcdef";for(let s=0;s<36;s++)e[s]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},init(){this.draw(),this.enableDrag(),this.initTransform()},zoomIn(){const e=this.$refs.domContainer.style.transform;let t=1;const s=e.match(x);if(s&&s.length>0){const e=parseFloat(s[1]);t=e+R}this.setScale(t)},zoomOut(){const e=this.$refs.domContainer.style.transform;let t=1;const s=e.match(x);if(s&&s.length>0){const e=parseFloat(s[1]);t=e>R?e-.1:e}this.setScale(t)},restoreScale(){this.setScale(1)},setScale(e){if("number"!==typeof e)return;let t=this.getTranslate(),s=`translate(${t[0]}px, ${t[1]}px)`;this.$refs.svg.style.transform=`scale(${e}) `+s,this.$refs.domContainer.style.transform=`scale(${e}) `+s,this.currentScale=e,this.$emit("scale",e)},getTranslate(){let e=this.$refs.svg.style.transform,t=e.match(A);if(null===t)return[null,null];let s=parseInt(t[1]),r=parseInt(t[2]);return[s,r]},isVertical(){return this.direction===T.VERTICAL},updatedInternalData(e){var t={name:"__invisible_root",children:[]};if(!e)return t;if(Array.isArray(e))for(var s=e.length-1;s>=0;s--)t.children.push(this.deepCopy(e[s]));else t.children.push(this.deepCopy(e));return t},deepCopy(e){let t={_key:this.uuid()};for(var s in e)null===e[s]?t[s]=null:Array.isArray(e[s])?t[s]=e[s].map(e=>this.deepCopy(e)):"object"===typeof e[s]?t[s]=this.deepCopy(e[s]):t[s]=e[s];return"collapsed"in e&&e["collapsible"]&&e["collapsed"]&&(t["_children"]=t["children"],t["children"]=null,t["_collapsed"]=!0),t},initTransform(){const e=this.$refs.container.offsetWidth,t=this.$refs.container.offsetHeight;this.isVertical()?(this.initTransformX=Math.floor(e/2),this.initTransformY=Math.floor(this.config.nodeHeight-L)):(this.initTransformX=Math.floor(this.config.nodeWidth-L),this.initTransformY=Math.floor(t/2))},generateLinkPath(e){const t=this;if(this.linkStyle===I.CURVE){const s=this.isVertical()?S.linkVertical():S.linkHorizontal();return s.x(function(e){return e.x}).y(function(e){return e.y}).source(function(e){const s={x:e.source.x,y:e.source.y};return t.direction===t.DIRECTION.VERTICAL?s:M(s)}).target(function(e){const s={x:e.target.x,y:e.target.y};return t.direction===t.DIRECTION.VERTICAL?s:M(s)}),s(e)}if(this.linkStyle===I.STRAIGHT){const t=S.path();let s={x:e.source.x,y:e.source.y},r={x:e.target.x,y:e.target.y};this.isVertical()||(s=M(s),r=M(r));const i=r.x-s.x,a=r.y-s.y,n=this.isVertical()?{x:s.x,y:s.y+a/2}:{x:s.x+i/2,y:s.y},o=this.isVertical()?{x:r.x,y:s.y+a/2}:{x:s.x+i/2,y:r.y};return t.moveTo(s.x,s.y),t.lineTo(n.x,n.y),t.lineTo(o.x,o.y),t.lineTo(r.x,r.y),t.toString()}},draw(){var[e,t]=this.buildTree(this._dataset);e.splice(0,1),t=t.filter(e=>"__invisible_root"!==e.source.data.name),this.linkDataList=t,this.nodeDataList=e;const s=this.dataset["identifier"],r=this.dataset["links"];if(r&&s)for(const n of r){let e,t;if("value"===s?(e=this.nodeDataList.find(e=>e[s]==n.parent),t=this.nodeDataList.filter(e=>e[s]==n.child)):(e=this.nodeDataList.find(e=>e["data"][s]==n.parent),t=this.nodeDataList.filter(e=>e["data"][s]==n.child)),e&&t)for(const s of t){const t=Object.assign({source:e,target:s},n.styles);this.linkDataList.push(t)}}this.svg=this.d3.select(this.$refs.svg);const i=this,a=this.svg.selectAll(".link").data(t,e=>`${e.source.data._key}-${e.target.data._key}`);a.enter().append("path").style("opacity",0).transition().duration(z).ease(S.easeCubicInOut).style("opacity",1).style("stroke",(e,t)=>e.stroke).style("stroke-width",(e,t)=>e["stroke-width"]).style("stroke-dashoffset",(e,t)=>e["stroke-dashoffset"]).style("stroke-dasharray",(e,t)=>e["stroke-dasharray"]).style("stroke-linecap",(e,t)=>e["stroke-linecap"]).attr("class","link").attr("d",function(e,t){return i.generateLinkPath(e)}),a.transition().duration(z).ease(S.easeCubicInOut).attr("d",function(e){return i.generateLinkPath(e)}),a.exit().transition().duration(z/2).ease(S.easeCubicInOut).style("opacity",1).style("stroke",(e,t)=>"").style("stroke-width",(e,t)=>"").style("stroke-dashoffset",(e,t)=>"").style("stroke-dasharray",(e,t)=>"").style("stroke-linecap",(e,t)=>"").style("opacity",0).remove()},buildTree(e){const t=this.d3.tree().nodeSize([this.config.nodeWidth,this.config.levelHeight]).separation(function(e,t){return e.parent==t.parent?1:1+1/(e.depth+1)}),s=t(this.d3.hierarchy(e));return[s.descendants(),s.links()]},enableDrag(){const e=this.$refs.svg,t=this.$refs.container;let s=0,r=0,i=!1,a="";t.onmousedown=t=>{a=e.style.transform,s=t.clientX,r=t.clientY,i=!0},t.onmousemove=t=>{if(!i)return;const n=a;let o=0,l=0;if(n){const e=n.match(A);if(null!==e&&0!==e.length){const[t,s]=e.slice(1);o=parseInt(t),l=parseInt(s)}}let c=Math.floor((t.clientX-s)/this.currentScale)+o,d=Math.floor((t.clientY-r)/this.currentScale)+l,u=`translate(${c}px, ${d}px)`;n&&(u=n.replace(A,u)),e.style.transform=u,this.$refs.domContainer.style.transform=u},t.onmouseup=e=>{s=0,r=0,i=!1}},collapseNode(e){if(this.collapseEnabled){const t=this.nodeDataList[e];if(!t.data.collapsible)return;t.data.children?(t.data._children=t.data.children,t.data.children=null,t.data._collapsed=!0):(t.data.children=t.data._children,t.data._children=null,t.data._collapsed=!1),this.draw()}},formatDimension(e){return"number"===typeof e?`${e}px`:-1!==e.indexOf("px")?e:`${e}px`},parseDimensionNumber(e){return"number"===typeof e?e:parseInt(e.replace("px",""))}},watch:{_dataset:{deep:!0,handler:function(){this.draw(),this.initTransform()}},_linkStyle:{deep:!0,handler:function(){this.draw(),this.initTransform()}}}},j=D,N=(0,d.A)(j,w,_,!1,null,"6999d6a6",null),B=N.exports,E=function(){var e=this,t=e._self._c;return t("v-card-subtitle",{staticClass:"cardSubtitle"},[t("div",{staticClass:"wrap"},[""!=e.icon?t("v-icon",{staticClass:"phase-icon mr-1",attrs:{color:e.color}},[e._v(" mdi-"+e._s(e.icon)+" ")]):t("v-progress-circular",{staticClass:"phase-spinner mr-1",attrs:{indeterminate:"",size:14,width:2,color:e.color}}),t("span",{class:e.color+"--text"},[e._v(" "+e._s(e.phase)+" ")])],1)])},P=[],H={name:"ClusterPhase",props:{phase:String},data(){return{color:"",icon:""}},methods:{getColor(e){switch(e){case"Provisioned":this.color="success";break;case"Pending":case"Provisioning":case"Deleting":this.color="warning";break;case"Failed":case"Unknown":this.color="error";break;default:this.color="grey";break}},setIcon(e){switch(e){case"Provisioned":this.icon="check-circle";break;case"Pending":case"Provisioning":case"Deleting":this.icon="";break;case"Failed":this.icon="alert";break;case"Unknown":this.icon="help-circle";break;default:this.icon="";break}}},mounted(){this.getColor(this.phase),this.setIcon(this.phase)}},F=H,W=s(2938),q=s(6930),U=s(1554),Y=(0,d.A)(F,E,P,!1,null,"b3620ce2",null),J=Y.exports;h()(Y,{VCardSubtitle:W.ZR,VIcon:q.A,VProgressCircular:U.A});var Z={name:"ManagementClusterTree",components:{VueTree:B,ClusterPhase:J},props:{treeData:Object,treeConfig:Object,treeIsReady:Boolean},data(){return{alert:!1,errorMessage:""}},setup(){const e=o();return{store:e}},methods:{getIcon(e){switch(e){case"AzureCluster":return"microsoft-azure";case"DockerCluster":return"docker";case"GCPCluster":return"google-cloud";case"AWSCluster":return"aws";default:return"kubernetes"}}}},G=Z,X=s(1484),Q=s(152),K=s(1034),ee=(0,d.A)(G,C,b,!1,null,"876aee26",null),te=ee.exports;h()(ee,{VCard:X.A,VCardActions:W.SL,VCardSubtitle:W.ZR,VCardText:W.OQ,VCardTitle:W.ri,VHover:Q.A,VIcon:q.A,VProgressCircular:U.A,VSpacer:K.A});var se=function(){var e=this,t=e._self._c;return t("v-card",{staticClass:"py-1",attrs:{"min-width":"500px",elevation:"6",light:!e.$vuetify.theme.dark}},[t("v-card-title",{staticClass:"ml-2"},[e._v(" Settings "),t("v-spacer"),t("v-btn",{attrs:{icon:""},on:{click:()=>{this.$emit("close",{})}}},[t("v-icon",[e._v("mdi-window-close")])],1)],1),t("v-card-text",{staticClass:"py-0 ml-2"},[t("div",{staticClass:"text-subtitle-2"},[e._v("About")])]),t("v-list",{attrs:{rounded:""}},[t("v-list-item",[t("v-list-item-icon",[t("v-icon",[e._v("mdi-information")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v("Version")])],1),t("v-list-item-action",[e._v(" "+e._s(e.version)+" ")])],1),t("v-list-item",{attrs:{href:"https://github.com/Jont828/cluster-api-visualizer",target:"_blank"}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-github")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v("Source code")])],1),t("v-list-item-action",[t("v-icon",[e._v("mdi-open-in-new")])],1)],1)],1),t("v-card-text",{staticClass:"py-0 ml-2"},[t("div",{staticClass:"text-subtitle-2"},[e._v("Appearance")])]),t("v-list",{attrs:{rounded:""}},[t("v-list-item",[t("v-list-item-icon",[t("v-icon",[e._v("mdi-brightness-6")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v("Dark theme")])],1),t("v-list-item-action",[t("v-switch",{on:{change:e.toggleDarkTheme},model:{value:e.store.darkTheme,callback:function(t){e.$set(e.store,"darkTheme",t)},expression:"store.darkTheme"}})],1)],1),t("v-list-item",[t("v-list-item-icon",[t("v-icon",[e._v("mdi-sitemap-outline")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v("Straighten links")])],1),t("v-list-item-action",[t("v-switch",{model:{value:e.store.straightLinks,callback:function(t){e.$set(e.store,"straightLinks",t)},expression:"store.straightLinks"}})],1)],1)],1),t("v-card-text",{staticClass:"py-0 ml-2"},[t("div",{staticClass:"text-subtitle-2"},[e._v("General")])]),t("v-list",{attrs:{rounded:""}},[t("v-list-item",[t("v-list-item-icon",[t("v-icon",[e._v("mdi-file-download")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v("Download Format")])],1),t("v-list-item-action",[t("v-select",{staticClass:"selectBox",attrs:{items:e.fileTypes,dense:"","hide-details":""},model:{value:e.store.selectedFileType,callback:function(t){e.$set(e.store,"selectedFileType",t)},expression:"store.selectedFileType"}})],1)],1),t("v-list-item",[t("v-list-item-icon",[t("v-icon",[e._v("mdi-timer-sync")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v("Polling period")])],1),t("v-list-item-action",[t("v-select",{staticClass:"selectBox",attrs:{items:e.pollingInterval,dense:"","hide-details":""},model:{value:e.store.selectedInterval,callback:function(t){e.$set(e.store,"selectedInterval",t)},expression:"store.selectedInterval"}})],1)],1),t("v-list-item",{staticClass:"listRow"},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-file-document")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v("Max Log Lines")])],1),t("v-list-item-action",[t("div",{staticClass:"relWrap"},[t("v-text-field",{staticClass:"textInput",attrs:{rules:e.rules,height:"25"},model:{value:e.maxLogLines,callback:function(t){e.maxLogLines=t},expression:"maxLogLines"}})],1)])],1)],1)],1)},re=[],ie={name:"SettingsCard",components:{},props:{version:String},watch:{maxLogLines:function(){this.positiveInteger.test(this.maxLogLines)&&(this.store.maxLogLines=this.maxLogLines)}},methods:{toggleDarkTheme(e){this.$vuetify.theme.dark=e},ensurePositiveInt(e){return!!this.positiveInteger.test(e)||"Must be a positive integer."}},setup(){const e=o();return{store:e}},data(){return{positiveInteger:/^[1-9]\d*$/,maxLogLines:this.store.maxLogLines,fileTypes:["YAML","JSON"],pollingInterval:["1s","5s","10s","30s","1m","5m","Off"],rules:[e=>{const t=/^[1-9]\d*$/;return t.test(e)||"Must be positive integer"}]}}},ae=ie,ne=s(3740),oe=s(8983),le=s(7296),ce=s(2659),de=s(2327),ue=s(9136),he=s(661),ve=s(2437),pe=s(7112),me=(0,d.A)(ae,se,re,!1,null,"0091d765",null),ge=me.exports;h()(me,{VBtn:ne.A,VCard:X.A,VCardText:W.OQ,VCardTitle:W.ri,VIcon:q.A,VList:oe.A,VListItem:le.A,VListItemAction:ce.A,VListItemContent:de.pr,VListItemIcon:ue.A,VListItemTitle:de.UZ,VSelect:he.A,VSpacer:K.A,VSwitch:ve.A,VTextField:pe.A});var fe=function(){var e=this,t=e._self._c;return t("v-app-bar",{attrs:{id:"appBar",app:"",color:e.$vuetify.theme.dark?null:"primary",dark:""}},[e.showBack?t("v-btn",{staticClass:"ma-2",attrs:{icon:"",text:""},on:{click:()=>{e.router.back()}}},[t("v-icon",{attrs:{color:"white"}},[e._v(" mdi-chevron-left ")])],1):t("v-app-bar-nav-icon",{staticClass:"ma-2"}),t("v-toolbar-title",{staticClass:"text-no-wrap pa-0"},[e._v(e._s(e.title))]),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:r}){return[t("v-btn",e._g(e._b({staticClass:"ma-2",attrs:{icon:"",text:""},on:{click:function(t){return e.$emit("reload",!0)}}},"v-btn",r,!1),s),[t("v-icon",{attrs:{color:"white"}},[e._v(" "+e._s("mdi-refresh")+" ")])],1)]}}])},[t("span",[e._v("Reload resources")])]),t("v-spacer"),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:r}){return[t("v-btn",e._g(e._b({staticClass:"ma-2",attrs:{icon:"",text:""},on:{click:function(t){return e.$emit("zoomOut",!0)}}},"v-btn",r,!1),s),[t("v-icon",{attrs:{color:"white"}},[e._v(" "+e._s("mdi-minus")+" ")])],1)]}}])},[t("span",[e._v("Zoom out")])]),e.scaleIcon?t("v-icon",{attrs:{color:"white"}},[e._v(" mdi-"+e._s(e.scaleIcon))]):t("span",[e._v(e._s(e.scale))]),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:r}){return[t("v-btn",e._g(e._b({staticClass:"ma-2",attrs:{icon:"",text:""},on:{click:function(t){return e.$emit("zoomIn",!0)}}},"v-btn",r,!1),s),[t("v-icon",{attrs:{color:"white"}},[e._v(" "+e._s("mdi-plus")+" ")])],1)]}}])},[t("span",[e._v("Zoom in")])]),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:r}){return[t("v-btn",e._g(e._b({staticClass:"ma-2",attrs:{icon:"",text:""},on:{click:function(t){return e.$emit("showSettings",!0)}}},"v-btn",r,!1),s),[t("v-icon",{attrs:{color:"white"}},[e._v(" mdi-cog ")])],1)]}}])},[t("span",[e._v("Show settings")])])],1)},ye=[],ke={name:"AppBar",props:{title:String,showBack:Boolean,isStraight:Boolean,scale:String,scaleIcon:String,backURL:String},data(){return{router:Pt}}},Ce=ke,be=s(7814),we=s(2696),_e=s(2367),Se=s(7270),Ae=(0,d.A)(Ce,fe,ye,!1,null,"59832510",null),xe=Ae.exports;h()(Ae,{VAppBar:be.A,VAppBarNavIcon:we.A,VBtn:ne.A,VIcon:q.A,VSpacer:K.A,VToolbarTitle:_e.sw,VTooltip:Se.A});var Ie=function(){var e=this,t=e._self._c;return t("div",{staticClass:"alert-wrapper"},[t("v-alert",{staticClass:"alert-message",attrs:{value:e.value,type:e.type,dismissible:"",border:"left",elevation:"2","colored-border":""},on:{input:e.update}},[e._v(" "+e._s(e.message)+" ")])],1)},Te=[],$e={name:"AlertMessage",props:{value:Boolean,message:String,type:String},methods:{update(e){this.$emit("input",e)}}},Oe=$e,Ve=s(7162),Le=(0,d.A)(Oe,Ie,Te,!1,null,"1c5f923d",null),ze=Le.exports;h()(Le,{VAlert:Ve.A});const Re={data(){return{gitVersion:""}},async beforeMount(){await this.fetchVersion()},methods:{async fetchVersion(){const e=await r.Ay.axios.get("/version");null!=e.data?(console.log("Git version:",e.data),this.gitVersion=e.data.gitVersion):console.error("Failed getting git version info")}}};var Me={name:"ManagementCluster",components:{ManagementClusterTree:te,SettingsCard:ge,AlertMessage:ze,AppBar:xe},mixins:[Re],data(){return{showSettingsOverlay:!1,treeConfig:{nodeWidth:300,nodeHeight:140,levelHeight:275},treeData:{},cachedTreeString:"",treeIsReady:!1,scale:1,alert:!1,errorMessage:""}},setup(){const e=o();return{store:e}},async beforeMount(){await this.fetchOverview()},computed:{theme(){return this.$vuetify.theme.dark?"dark":"light"}},mounted(){document.title="Management Cluster",this.intervalHandler(this.store.selectedInterval)},beforeDestroy(){this.selected={},clearInterval(this.polling)},watch:{"store.selectedInterval":function(e){console.log("Overview store.selectedInterval: "+e),this.intervalHandler(e)}},methods:{intervalHandler(e){if(console.log("Setting polling interval to "+e),clearInterval(this.polling),"Off"===e)return;let t=0,s=e.match(/(\d+)\s*s/),r=e.match(/(\d+)\s*m/);s&&(t+=parseInt(s[1])),r&&(t+=60*parseInt(r[1])),console.log("Setting interval to "+t+" seconds"),this.polling=setInterval(function(){this.fetchOverview()}.bind(this),1e3*t)},linkHandler(e){this.isStraight=e},async fetchOverview(e=!1){try{const t=await r.Ay.axios.get("/management-cluster");if(null==t.data)return void(this.errorMessage="Couldn't find a management cluster from default kubeconfig");console.log("Cluster overview data:",t.data),(e||this.cachedTreeString!==JSON.stringify(t.data))&&(this.treeData=t.data,this.cachedTreeString=JSON.stringify(t.data),this.treeIsReady=!0)}catch(t){console.log("Error:",t.toJSON()),this.alert=!0,t.response?404==t.response.status?this.errorMessage="Management cluster not found, is the kubeconfig set?":this.errorMessage="Unable to load management cluster and workload clusters":t.request?this.errorMessage="No server response received":this.errorMessage="Unable to create request"}}}},De=Me,je=s(8907),Ne=(0,d.A)(De,y,k,!1,null,"40757c50",null),Be=Ne.exports;h()(Ne,{VOverlay:je.A});var Ee=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper"},[t("AppBar",{attrs:{title:"Cluster: "+e.getTitle(),showBack:!0,scale:Math.round(100*e.scale)+"%"},on:{togglePathStyle:e.linkHandler,reload:()=>{e.fetchCluster(e.forceRedraw=!0),e.fetchCRD(e.selected,!0)},zoomIn:()=>{e.$refs.targetTree.$refs.tree.zoomIn()},zoomOut:()=>{e.$refs.targetTree.$refs.tree.zoomOut()},showSettings:()=>{e.showSettingsOverlay=!0}}}),e.treeIsReady?t("div",{attrs:{id:"chartLoadWrapper"}},[t("DescribeClusterTree",{ref:"targetTree",style:{height:0==Object.keys(e.selected).length?"100%":e.hasConditions()?"calc(100% - 84px - 40px)":"calc(100% - 84px)"},attrs:{id:"targetTree",treeConfig:e.treeConfig,treeData:e.treeData,isStraight:e.store.straightLinks,legend:e.legend},on:{selectNode:e.fetchCRD,scale:t=>{e.scale=t}}}),e.resourceIsReady&&this.selected.name?t("div",{staticClass:"resourceView"},[t("CustomResourceDefinition",{attrs:{items:e.treeviewResource,jsonItems:e.resource,name:e.selected.kind+"/"+e.selected.name,color:e.$vuetify.theme.themes[e.theme].legend[e.selected.provider]},on:{unselectNode:e=>{this.selected=e}}})],1):e._e()],1):t("div",{staticClass:"spinner",attrs:{id:"resourceTree"}},[t("v-progress-circular",{attrs:{size:50,width:5,indeterminate:"",color:"primary"}})],1),t("AlertMessage",{attrs:{type:"error",message:e.errorMessage},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}}),t("v-overlay",{staticClass:"overlay",attrs:{value:e.showSettingsOverlay,"z-index":"99999",light:""}},[t("SettingsCard",{staticClass:"settingsCard",attrs:{version:e.gitVersion},on:{close:()=>{e.showSettingsOverlay=!e.showSettingsOverlay}}})],1),t("ScrollButton")],1)},Pe=[],He=(s(7588),function(){var e=this,t=e._self._c;return t("div",{staticClass:"targetTreeWrapper"},[t("vue-tree",{ref:"tree",attrs:{id:"resourceTree",dataset:e.treeData,config:e.treeConfig,"collapse-enabled":!0,linkStyle:e.store.straightLinks?"straight":"curve"},on:{scale:t=>e.$emit("scale",t)},scopedSlots:e._u([{key:"node",fn:function({node:s,collapsed:r,index:i,collapseNode:a}){return[t("div",{staticClass:"top-spacer-wrap"},[t("div",{staticClass:"top-spacer"}),e._v(" "),t("div",{staticClass:"card-wrap shadow"},[t("v-hover",{scopedSlots:e._u([{key:"default",fn:function(n){return[t("v-card",{staticClass:"collapse-node-wrap mx-auto transition-swing",style:function(){return s.collapseWithTab?e.$vuetify.theme.dark?{"background-color":n.hover&&s.tabHover?"#424242":"#383838"}:{"background-color":n.hover&&s.tabHover?e.$vuetify.theme.themes[e.theme].legendTabHover[s.provider]:e.$vuetify.theme.themes[e.theme].legendTab[s.provider]}:{"background-color":"transparent"}}(),attrs:{elevation:s.collapseWithTab?n.hover?6:3:0,dark:""}},[t("v-hover",{scopedSlots:e._u([{key:"default",fn:function({hover:n}){return[t("v-card",{staticClass:"node mx-auto transition-swing",style:e.$vuetify.theme.dark?{"background-color":n?"#383838":"#272727",color:e.$vuetify.theme.themes[e.theme].legend[s.provider]}:{"background-color":e.$vuetify.theme.themes[e.theme].legend[s.provider]},attrs:{dark:"",elevation:n?6:3},on:{click:function(t){s.collapseOnClick?a(i):e.$emit("selectNode",s)}}},[t("p",{staticClass:"kind font-weight-medium text-truncate"},[e._v(e._s(s.collapseOnClick?s.displayName:s.kind))]),s.collapseOnClick?t("div",{staticClass:"mini-chevron-wrap"},[t("v-icon",{staticClass:"chevron",style:e.$vuetify.theme.dark?{color:e.$vuetify.theme.themes[e.theme].legend[s.provider]}:null,attrs:{size:"18"}},r?[e._v("mdi-chevron-down")]:[e._v("mdi-chevron-up")])],1):t("p",{staticClass:"name font-italic text-truncate"},[e._v(e._s(s.displayName))])])]}}],null,!0)}),s.collapseWithTab?t("v-card",{staticClass:"chevron-wrap",attrs:{color:"transparent",elevation:"0"},on:{click:function(e){return a(i)},mouseover:function(e){s.tabHover=!0},mouseleave:function(e){s.tabHover=!1}}},[t("v-icon",{staticClass:"chevron",style:e.$vuetify.theme.dark?{color:e.$vuetify.theme.themes[e.theme].legend[s.provider]}:null,attrs:{size:"18"}},r?[e._v("mdi-chevron-down")]:[e._v("mdi-chevron-up")])],1):e._e()],1)]}}],null,!0)}),s.hasReady?t("StatusBadge",{attrs:{type:s.ready?"success":s.severity.toLowerCase(),size:18}}):e._e()],1)])]}}])}),t("div",{staticClass:"legend"},[t("v-card",{staticClass:"legend-card"},e._l(e.legend,function(s,r){return t("div",{key:r,staticClass:"legend-entry"},[t("div",{staticClass:"legend-entry-content"},[t("v-icon",{staticClass:"legend-entry-icon",attrs:{color:e.$vuetify.theme.themes[e.theme].legend[r]}},[e._v(" mdi-square-rounded ")]),t("div",{staticClass:"legend-entry-text"},[e._v(e._s(s))])],1)])}),0)],1)],1)}),Fe=[],We=function(){var e=this,t=e._self._c;return t("div",{staticClass:"badge",style:{"border-color":e.$vuetify.theme.themes[e.theme].background}},[t("div",{staticClass:"topRight",style:{top:-e.size/2+"px",right:-e.size/2+"px",height:e.size+"px",width:e.size+"px"}},[t("div",{staticClass:"border",style:{"border-color":e.$vuetify.theme.themes[e.theme].background,height:e.size-4+"px",width:e.size-4+"px"}},[t("StatusIcon",{staticClass:"readyWrap",attrs:{circle:"",spinner:"",type:e.type,size:e.size-4}})],1)])])},qe=[],Ue=s(689),Ye=function(){var e=this,t=e._self._c;return e.circle?t("v-avatar",{attrs:{size:e.size,"min-width":"0","min-height":"0",color:e.getColor(e.type),left:e.left}},["success"===e.type?t("v-icon",{staticClass:"readyIcon",attrs:{color:e.$vuetify.theme.dark?"black":"white",size:e.size-2}},[e._v(" mdi-check")]):"error"===e.type?t("v-icon",{staticClass:"readyIcon",attrs:{color:e.$vuetify.theme.dark?"black":"white",size:e.size-2}},[e._v(" mdi-exclamation")]):!e.spinner||"warning"!==e.type&&"info"!==e.type?"warning"===e.type?t("v-icon",{staticClass:"readyIcon",attrs:{color:e.$vuetify.theme.dark?"black":"white",size:e.size-2}},[e._v(" mdi-exclamation")]):"info"===e.type?t("v-icon",{staticClass:"readyIcon",attrs:{color:e.$vuetify.theme.dark?"black":"white",size:e.size-2}},[e._v(" mdi-information-variant")]):"unknown"!==e.type&&e.type?e._e():t("v-icon",{staticClass:"readyIcon",attrs:{color:e.$vuetify.theme.dark?"black":"white",size:e.size-2}},[e._v(" mdi-help")]):t("v-progress-circular",{staticClass:"readySpinner",attrs:{indeterminate:"",size:e.spinnerSize,width:e.spinnerWidth,color:e.$vuetify.theme.dark?"black":"white"}})],1):t("v-avatar",{staticClass:"mr-1",attrs:{size:e.size,tile:"","min-width":"0","min-height":"0",color:e.getColor(e.type),left:e.left}},["success"===e.type?t("v-icon",{staticClass:"readyIcon",attrs:{color:e.getColor(e.type),size:e.size}},[e._v(" mdi-check-circle")]):"error"===e.type?t("v-icon",{staticClass:"readyIcon",attrs:{color:e.getColor(e.type),size:e.size}},[e._v(" mdi-alert-circle")]):!e.spinner||"warning"!==e.type&&"info"!==e.type?"warning"===e.type?t("v-icon",{staticClass:"readyIcon",attrs:{color:e.getColor(e.type),size:e.size}},[e._v(" mdi-alert-circle")]):"info"===e.type?t("v-icon",{staticClass:"readyIcon",attrs:{color:e.getColor(e.type),size:e.size}},[e._v(" mdi-information")]):"unknown"!==e.type&&e.type?e._e():t("v-icon",{staticClass:"readyIcon",attrs:{color:e.getColor(e.type),size:e.size}},[e._v(" mdi-help-circle")]):t("v-progress-circular",{staticClass:"readySpinner",attrs:{indeterminate:"",size:e.spinnerSize,width:e.spinnerWidth,color:e.getColor(e.type)}})],1)},Je=[],Ze={name:"StatusIcon",props:{type:{default:"success",type:String},size:Number,spinnerWidth:{default:1.5,type:Number},circle:Boolean,spinner:Boolean,left:Boolean},data(){return{spinnerSize:this.size?.75*this.size:12}},methods:{getColor(e){return this.circle?"unknown"===e?"error":!this.spinner||"warning"!==e&&"info"!==e?"info"===e?"warning":e:"warning":""}}},Ge=Ze,Xe=s(4112),Qe=(0,d.A)(Ge,Ye,Je,!1,null,null,null),Ke=Qe.exports;h()(Qe,{VAvatar:Xe.A,VIcon:q.A,VProgressCircular:U.A});var et={name:"StatusBadge",components:{StatusIcon:Ke},props:{type:String,blinking:Boolean,size:{default:16,type:Number}},computed:{theme(){return this.$vuetify.theme.dark?"dark":"light"}},methods:{getColor(){switch(this.type){case"ready":return Ue.A.green.base;case"error":return Ue.A.red.accent2;case"loading":return Ue.A.orange.darken1;default:return Ue.A.grey}}}},tt=et,st=(0,d.A)(tt,We,qe,!1,null,"40880a45",null),rt=st.exports,it={name:"DescribeClusterTree",components:{VueTree:B,StatusBadge:rt},data(){return{legendGradient:"",index:0}},setup(){const e=o();return{store:e}},computed:{theme(){return this.$vuetify.theme.dark?"dark":"light"}},props:{treeConfig:Object,treeData:Object,selectedNode:Object,legend:Object}},at=it,nt=(0,d.A)(at,He,Fe,!1,null,"91ac08a4",null),ot=nt.exports;h()(nt,{VCard:X.A,VHover:Q.A,VIcon:q.A});var lt=function(){var e=this,t=e._self._c;return t("v-card",{staticClass:"resource-card mx-auto"},[e.$vuetify.theme.dark?t("link",{attrs:{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/stackoverflow-dark.min.css"}}):t("link",{attrs:{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/stackoverflow-light.min.css"}}),t("v-sheet",{staticClass:"resourceSheet pa-4",attrs:{color:e.$vuetify.theme.dark?"#272727":e.color}},[t("v-card-title",{staticClass:"text-h5",style:{color:e.$vuetify.theme.dark?e.color:"white"}},[e._v(" "+e._s(e.name)+" "),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:r}){return[t("router-link",{attrs:{to:e.url}},[t("v-btn",e._g(e._b({staticClass:"ml-1",attrs:{icon:"",color:"white"}},"v-btn",r,!1),s),[t("v-icon",[e._v("mdi-open-in-new")])],1)],1)]}}])},[t("span",[e._v("Open logs for CRD")])]),t("v-spacer"),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:r}){return[t("v-btn",e._g(e._b({attrs:{icon:"",color:"white"},on:{click:e.downloadCRD}},"v-btn",r,!1),s),[t("v-icon",[e._v("mdi-download")])],1)]}}])},[t("span",[e._v("Download CRD")])]),t("v-btn",{attrs:{icon:"",color:"white"},on:{click:()=>{this.$emit("unselectNode",{})}}},[t("v-icon",[e._v("mdi-window-close")])],1)],1),t("v-card-subtitle",[t("div",{staticClass:"conditionChipListWrapper my-2"},e._l(e.conditions,function(s,r){return t("div",{key:r},[t("v-tooltip",{attrs:{top:e.scrollY<=20,bottom:e.scrollY>20,disabled:"True"===s.status},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:a}){return[t("v-chip",e._g(e._b({class:{conditionChip:!0},attrs:{active:"",link:"",outlined:e.$vuetify.theme.dark,color:e.$vuetify.theme.dark?e.getType(s):"white","text-color":e.$vuetify.theme.dark?"":e.getType(s)},on:{click:function(t){return e.selectCondition(r)}}},"v-chip",a,!1),i),[t("StatusIcon",{attrs:{type:"True"===s.status?"success":"Unknown"===s.Status?"unknown":s.severity?s.severity.toLowerCase():"unknown",spinnerWidth:2,left:""}}),e._v(" "+e._s(s.type)+" ")],1)]}}],null,!0)},[s.severity&&s.reason?t("span",[e._v(e._s(s.severity)+": "+e._s(s.reason))]):s.severity?t("span",[e._v(e._s(s.severity))]):s.reason?t("span",[e._v(e._s(s.reason))]):t("span",[e._v("Unknown")])])],1)}),0),t("div",{staticClass:"mt-4"},[t("v-text-field",{attrs:{label:"Search Custom Resource Fields",dark:"",flat:"","solo-inverted":!e.$vuetify.theme.dark,solo:e.$vuetify.theme.dark,"hide-details":"",clearable:"","clear-icon":"mdi-close-circle-outline",color:e.$vuetify.theme.dark?"white":e.color},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("v-checkbox",{attrs:{dark:"","hide-details":"",label:"Case sensitive search",color:e.$vuetify.theme.dark?"white":e.color},model:{value:e.caseSensitive,callback:function(t){e.caseSensitive=t},expression:"caseSensitive"}})],1)])],1),t("v-card-text",[t("v-treeview",{staticClass:"text-wrap",attrs:{hoverable:"",items:e.items,search:e.search,filter:e.filter,open:e.open,"open-all":!0,active:e.active,activatable:"",rounded:""},on:{"update:open":function(t){e.open=t},"update:active":function(t){e.active=t}},scopedSlots:e._u([{key:"label",fn:function({item:e}){return[t("highlightjs",{ref:e.id,staticClass:"text-wrap yaml-code",attrs:{language:"yaml",code:e.name}})]}}])})],1)],1)},ct=[],dt=s(5361),ut={name:"CustomResourceDefinition",components:{StatusIcon:Ke},props:{downloadType:String,items:Array,jsonItems:Object,name:String,color:String},setup(){const e=o();return{store:e}},data(){return{open:[],active:[],search:null,caseSensitive:!1,conditions:[],url:"",scrollY:0}},mounted(){this.setConditions(this.jsonItems?.status?.conditions),window.addEventListener("scroll",this.onScroll),console.log("JSON items are",this.jsonItems);let e=this.jsonItems.kind,t=this.jsonItems.metadata.name,s=this.jsonItems.metadata.namespace;this.url="/logs?kind="+e+"&name="+t+"&namespace="+s,console.log("URL is",this.url)},methods:{getType(e){return"True"===e.status?"success":e.isError||!e.severity||"Unknown"===e.status?"error":"warning"},onScroll(e){this.scrollY=window.scrollY},downloadCRD(){const e=document.createElement("a");let t="";"JSON"===this.store.selectedFileType?t=JSON.stringify(this.jsonItems,null,2):"YAML"===this.store.selectedFileType&&(t=dt.Ay.dump(this.jsonItems)),e.href=`data:text/plain;charset=utf-8,${t}`,e.download=this.name+"."+this.store.selectedFileType.toLowerCase(),e.click()},setConditions(e){this.conditions=[],void 0!==e&&e.forEach((e,t)=>{this.conditions.push({type:e.type,status:e.status,isError:"Error"===e.severity,severity:e.severity,reason:e.reason})}),console.log(this.conditions)},selectCondition(e){this.open.push(".status"),this.open.push(".status.conditions"),this.open.push(".status.conditions["+e+"]"),this.active.push(".status.conditions["+e+"].type"),console.log(this.open);let t=".status.conditions["+e+"].type";this.$nextTick(()=>this.$vuetify.goTo(this.$refs[t],{easing:"easeInOutQuint",duration:1e3}))}},watch:{jsonItems:{handler(e,t){console.log("Val is",e),this.setConditions(e?.status?.conditions)}},items:{handler(e,t){let s=function(e,t=[]){return e.forEach(e=>{e.children&&(t=t.concat(s(e.children))),t.push(e.id)}),t};this.open=s(e)}}},computed:{filter(){return this.caseSensitive?(e,t,s)=>e["name"].indexOf(t)>-1:(e,t,s)=>e["name"].toLowerCase().indexOf(t.toLowerCase())>-1}}},ht=ut,vt=s(6092),pt=s(3180),mt=s(8184),gt=s(5098),ft=(0,d.A)(ht,lt,ct,!1,null,"fca8f8f0",null),yt=ft.exports;h()(ft,{VBtn:ne.A,VCard:X.A,VCardSubtitle:W.ZR,VCardText:W.OQ,VCardTitle:W.ri,VCheckbox:vt.A,VChip:pt.A,VIcon:q.A,VSheet:mt.A,VSpacer:K.A,VTextField:pe.A,VTooltip:Se.A,VTreeview:gt.A});var kt=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"scrollButtonWrap"}},[t("v-fab-transition",[t("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.scrollY>20,expression:"scrollY > 20"}],ref:"button",attrs:{color:"accent",medium:"",fab:""},on:{click:function(t){return e.$vuetify.goTo(0,{duration:500,offset:0,easing:"easeInOutCubic"})}}},[t("v-icon",{attrs:{color:e.$vuetify.theme.dark?"black":"white"}},[e._v(" mdi-chevron-up ")])],1)],1)],1)},Ct=[],bt={name:"ScrollButton",data(){return{scrollY:0}},mounted(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll(e){this.scrollY=window.scrollY}}},wt=bt,_t=s(5961),St=(0,d.A)(wt,kt,Ct,!1,null,"1bd02ff3",null),At=St.exports;h()(St,{VBtn:ne.A,VFabTransition:_t.Z,VIcon:q.A});s(2543);var xt={name:"DescribeCluster",components:{DescribeClusterTree:ot,AppBar:xe,SettingsCard:ge,CustomResourceDefinition:yt,AlertMessage:ze,ScrollButton:At},mixins:[Re],data(){return{showSettingsOverlay:!1,showAboutOverlay:!1,alert:!1,errorMessage:"",treeIsReady:!1,resourceIsReady:!1,resource:{},selected:{},treeData:{},cachedTreeString:"",treeConfig:{nodeWidth:180,nodeHeight:90,levelHeight:140},scale:1,legend:{cluster:"Cluster API",bootstrap:"Bootstrap Provider",controlplane:"Control Plane Provider",infrastructure:"Infrastructure Provider",addons:"Add-ons",virtual:"None"},gitVersion:""}},setup(){const e=o();return{store:e}},async beforeMount(){await this.fetchCluster(),await this.fetchVersion()},computed:{theme(){return this.$vuetify.theme.dark?"dark":"light"}},mounted(){document.title="Cluster: "+this.getTitle(),this.intervalHandler(this.store.selectedInterval)},beforeDestroy(){this.selected={},clearInterval(this.polling)},watch:{"store.selectedInterval":function(e){console.log("DescribeCluster store.selectedInterval: "+e),this.intervalHandler(e)}},methods:{getTitle(){let e=this.$route.query.namespace,t=this.$route.query.name;return""!=e&&"default"!=e?e+"/"+t:t},intervalHandler(e){if(console.log("Setting polling interval to "+e),clearInterval(this.polling),"Off"===e)return;let t=0,s=e.match(/(\d+)\s*s/),r=e.match(/(\d+)\s*m/);s&&(t+=parseInt(s[1])),r&&(t+=60*parseInt(r[1])),console.log("Setting interval to "+t+" seconds"),this.polling=setInterval(function(){this.fetchCluster(),Object.keys(this.selected).length>0&&this.fetchCRD(this.selected,!0)}.bind(this),1e3*t)},linkHandler(e){this.isStraight=e},async fetchCRD(e,t=!1){if(!e.name||!e.kind||!e.group||!e.version)return console.log("Node missing required fields:",e),void(t&&(this.resourceIsReady=!1,this.selected={}));try{const t=new URLSearchParams;t.append("kind",e.kind),t.append("apiVersion",e.group+"/"+e.version),t.append("name",e.name),t.append("namespace",e.namespace);const s=await r.Ay.axios.get("/custom-resource-definition",{params:t});console.log("Response is",s.data),this.resource=s.data,this.treeviewResource=this.formatToTreeview(s.data),this.selected=e,this.resourceIsReady=!0}catch(s){console.log("Error:",s.toJSON()),this.alert=!0,t&&(this.resourceIsReady=!1,this.selected={}),s.response?404==s.response.status?this.errorMessage="Cluster Resource `"+e.kind+"/"+e.name+"` not found":this.errorMessage="Unable to load Cluster Resource `"+e.kind+"/"+e.name+"`":s.request?this.errorMessage="No server response received":this.errorMessage="Unable to create request"}},async fetchCluster(e=!1){console.log("Query params are ",this.$route.query),console.log("Other params are ",this.$route.params);try{const t=new URLSearchParams;t.append("name",this.$route.query.name),t.append("namespace",this.$route.query.namespace);const s=await r.Ay.axios.get("/describe-cluster",{params:t});console.log("Target cluster data:",s.data),(e||this.cachedTreeString!==JSON.stringify(s.data))&&(this.treeData=s.data,this.cachedTreeString=JSON.stringify(s.data),this.treeIsReady=!0)}catch(t){console.log("Error:",t.toJSON()),this.alert=!0,t.response?404==t.response.status?this.errorMessage="Cluster `"+this.$route.params.id+"` not found":this.errorMessage="Failed to construct object tree for cluster `"+this.$route.params.id+"`":t.request?this.errorMessage="No server response received":this.errorMessage="Unable to create request"}},formatToTreeview(e,t=""){let s=[];if("string"==typeof e)return[{name:e}];if(Array.isArray(e)){e.forEach((e,r)=>{s.push({id:t+"["+r+"]",name:r.toString()+":",children:this.formatToTreeview(e,t+"["+r+"]")})})}else Object.entries(e).forEach(([e,r])=>{let i="",a=[];"string"==typeof r||"number"==typeof r?i=e+": "+r:(i=e+":",a=this.formatToTreeview(r,t+"."+e)),s.push({id:t+"."+e,name:i,children:a})});return s},hasConditions(){return void 0!=this.resource?.status?.conditions&&this.resource?.status?.conditions.length>0}}},It=xt,Tt=(0,d.A)(It,Ee,Pe,!1,null,"624a7a8d",null),$t=Tt.exports;h()(Tt,{VOverlay:je.A,VProgressCircular:U.A});var Ot=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"overview"}},[t("AppBar",{attrs:{title:"Logs: "+e.kind+"/"+e.name,showBack:!0,scale:String(e.fontSize),scaleIcon:"format-size"},on:{reload:function(t){return e.fetchLogs(e.forceReload=!0)},zoomIn:()=>{e.fontSize+=1},zoomOut:()=>{e.fontSize>1&&(e.fontSize-=1)},showSettings:()=>{e.showSettingsOverlay=!0}}}),t("v-sheet",{directives:[{name:"show",rawName:"v-show",value:e.logsReady,expression:"logsReady"}],staticClass:"logs-card",attrs:{id:"chartLoadWrapper",dark:""}},[t("v-container",{staticClass:"log-container ma-0 px-0 py-2",attrs:{dark:"",fluid:""}},[t("DynamicScroller",{staticClass:"scroller",attrs:{items:e.logData,"min-item-size":2},scopedSlots:e._u([{key:"default",fn:function({item:s,index:r,active:i}){return[t("DynamicScrollerItem",{attrs:{item:s,active:i,"size-dependencies":[s.message],"data-index":r}},[t("v-row",{attrs:{rounded:"","no-gutters":""}},[t("v-col",{attrs:{cols:"12",rounded:""}},[t("highlightjs",{staticClass:"wrap pa-0 ml-2 mr-2 my-0",style:e.dynamicFontSize,attrs:{language:"json",code:s.message}})],1)],1)],1)]}}])})],1)],1),e.logsReady?e._e():t("div",{staticClass:"spinner",attrs:{id:"resourceTree"}},[t("v-progress-circular",{attrs:{size:50,width:5,indeterminate:"",color:"primary"}})],1),t("AlertMessage",{attrs:{type:e.alertType,message:e.errorMessage},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}}),t("v-overlay",{attrs:{id:"settingsOverlay",value:e.showSettingsOverlay,"z-index":"99999"}},[t("SettingsCard",{staticClass:"settingsCard",attrs:{version:e.gitVersion},on:{close:()=>{e.showSettingsOverlay=!e.showSettingsOverlay}}})],1),t("ScrollButton")],1)},Vt=[],Lt={name:"ResourceLogs",components:{SettingsCard:ge,AppBar:xe,AlertMessage:ze,ScrollButton:At},mixins:[Re],data(){return{showSettingsOverlay:!1,kind:"",name:"",namespace:"",logData:[],cachedLogString:[],logsReady:!1,fontSize:16,alert:!1,errorMessage:""}},setup(){const e=o();return{store:e}},async beforeMount(){await this.fetchLogs()},computed:{theme(){return this.$vuetify.theme.dark?"dark":"light"},dynamicFontSize(){return{fontSize:this.fontSize+"px !important"}}},mounted(){this.kind=this.$route.query.kind,this.namespace=this.$route.query.namespace,this.name=this.$route.query.name,document.title="Logs: "+this.kind+"/"+this.name,this.intervalHandler(this.store.selectedInterval)},beforeDestroy(){this.selected={},clearInterval(this.polling)},watch:{"store.selectedInterval":function(e){console.log("Overview store.selectedInterval: "+e),this.intervalHandler(e)}},methods:{intervalHandler(e){if(console.log("Setting polling interval to "+e),clearInterval(this.polling),"Off"===e)return;let t=0,s=e.match(/(\d+)\s*s/),r=e.match(/(\d+)\s*m/);s&&(t+=parseInt(s[1])),r&&(t+=60*parseInt(r[1])),console.log("Setting interval to "+t+" seconds"),this.polling=setInterval(function(){this.fetchLogs()}.bind(this),1e3*t)},linkHandler(e){this.isStraight=e},async fetchLogs(e=!1){try{const t=new URLSearchParams;let s=this.$route.query.kind,i=this.$route.query.namespace,a=this.$route.query.name;t.append("kind",s),t.append("name",a),t.append("namespace",i),console.log("Fetching log data");const n=await r.Ay.axios.get("/resource-logs",{params:t});if(null==n.data)return void(this.errorMessage="Failed to fetch log data");if(e||this.cachedLogString!==JSON.stringify(n.data)){this.cachedLogString=JSON.stringify(n.data);let e=[];for(let t=0;t<n.data.length;t++)e.push({id:t,message:n.data[t]});e.length>this.store.maxLogLines&&(e=e.slice(0,this.store.maxLogLines)),this.logData=e,this.logsReady=!0}0===this.logData.length&&(this.errorMessage="Resource has no associated logs",this.alert=!0,this.alertType="info")}catch(t){this.alertType="error",console.log("Error:",t.toJSON()),this.alert=!0,t.response?404==t.response.status?this.errorMessage="Logs not found":this.errorMessage="Failed to fetch resource logs":t.request?this.errorMessage="No server response received":this.errorMessage="Unable to create request"}}}},zt=Lt,Rt=s(4414),Mt=s(3449),Dt=s(2756),jt=(0,d.A)(zt,Ot,Vt,!1,null,"4a6da75c",null),Nt=jt.exports;h()(jt,{VCol:Rt.A,VContainer:Mt.A,VOverlay:je.A,VProgressCircular:U.A,VRow:Dt.A,VSheet:mt.A}),r.Ay.use(f.Ay);const Bt=[{path:"/",name:"ManagementCluster",component:Be},{path:"/cluster/",name:"DescribeCluster",component:$t,props:!0},{path:"/logs/",name:"ResourceLogs",component:Nt,props:!0},{path:"*",component:Be}],Et=new f.Ay({mode:"history",base:"/",routes:Bt});var Pt=Et,Ht=s(3971);r.Ay.use(Ht.A);var Ft=new Ht.A({theme:{options:{customProperties:!0},themes:{light:{primary:Ue.A.blue.darken2,accent:Ue.A.blue.darken1,background:"#f8f3f2",legend:{cluster:Ue.A.blue.darken1,bootstrap:Ue.A.amber.darken2,controlplane:Ue.A.purple.darken1,infrastructure:Ue.A.green.base,addons:Ue.A.red.darken1,virtual:Ue.A.grey.darken1},legendTab:{cluster:Ue.A.blue.darken2,bootstrap:Ue.A.amber.darken3,controlplane:Ue.A.purple.darken2,infrastructure:Ue.A.green.darken1,addons:Ue.A.red.darken2,virtual:Ue.A.grey.darken2},legendTabHover:{cluster:Ue.A.blue.base,bootstrap:Ue.A.amber.darken1,controlplane:Ue.A.purple.base,infrastructure:Ue.A.green.lighten1,addons:Ue.A.red.base,virtual:Ue.A.grey.base}},dark:{primary:Ue.A.blue.lighten3,background:"#121212",info:Ue.A.blue.lighten2,accent:Ue.A.blue.lighten2,success:Ue.A.green.lighten3,warning:Ue.A.orange.lighten2,error:Ue.A.red.accent1,legend:{cluster:Ue.A.blue.lighten3,bootstrap:Ue.A.amber.lighten3,controlplane:Ue.A.purple.lighten3,infrastructure:Ue.A.green.lighten3,addons:Ue.A.red.lighten2,virtual:Ue.A.grey.lighten1}}}}}),Wt=s(2505),qt=s.n(Wt),Ut=s(1021),Yt=s(3985),Jt=s(5981),Zt=s.n(Jt),Gt=s(5772),Xt=s.n(Gt),Qt=s(7533),Kt=s.n(Qt),es=s(7139),ts=s(1283);r.Ay.use(ts.Ay),Zt().registerLanguage("json",Xt()),Zt().registerLanguage("yaml",Kt()),r.Ay.use(es.A),r.Ay.use(n.R2);const ss=(0,n.Ey)();ss.use(Yt.A),r.Ay.config.productionTip=!1;const rs=qt().create({baseURL:"/api/v1"});r.Ay.use(Ut.A,rs),r.Ay.mixin({methods:{adjustColor(e,t){var s=!1;"#"==e[0]&&(e=e.slice(1),s=!0);var r=parseInt(e,16),i=(r>>16)+t;i>255?i=255:i<0&&(i=0);var a=(r>>8&255)+t;a>255?a=255:a<0&&(a=0);var n=(255&r)+t;return n>255?n=255:n<0&&(n=0),(s?"#":"")+(n|a<<8|i<<16).toString(16)}}}),r.Ay.config.productionTip=!1,new r.Ay({router:Pt,vuetify:Ft,pinia:ss,render:e=>e(g)}).$mount("#app")}},t={};function s(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,r,i,a){if(!r){var n=1/0;for(d=0;d<e.length;d++){r=e[d][0],i=e[d][1],a=e[d][2];for(var o=!0,l=0;l<r.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every(function(e){return s.O[e](r[l])})?r.splice(l--,1):(o=!1,a<n&&(n=a));if(o){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,i,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,a,n=r[0],o=r[1],l=r[2],c=0;if(n.some(function(t){return 0!==e[t]})){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var d=l(s)}for(t&&t(r);c<n.length;c++)a=n[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},r=self["webpackChunkcluster_api_visualizer"]=self["webpackChunkcluster_api_visualizer"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],function(){return s(542)});r=s.O(r)})();
//# sourceMappingURL=app.068b730a.js.map